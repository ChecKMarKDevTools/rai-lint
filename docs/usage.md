# Usage Guide

## Valid RAI Footer Formats

CheckMarK RAI Lint accepts three footer formats. All patterns are **case-insensitive**.

### 1. AI-Generated Footer

Use when the entire commit content was generated by AI:

```
feat: implement user authentication

Add JWT-based authentication with refresh tokens and secure session management.

üõ°Ô∏è RAI: AI-Generated
```

### 2. AI-Assisted Footer

Use when AI helped but the work was primarily human-driven:

```
fix: resolve race condition in payment processing

Added mutex locks to prevent concurrent payment processing issues.

üõ°Ô∏è RAI: AI-Assisted
```

### 3. Verdent AI Footer

Use when working with Verdent AI or requiring explicit tool attribution:

```
chore: update dependencies to latest versions

Updated all npm packages to latest compatible versions.

Generated-by: Verdent AI <verdent@verdent.ai>
```

## Commit Message Structure

RAI footers should be placed at the end of the commit message, after the description and any other footers:

```
<type>(<scope>): <subject>

<body>

<other-footers>

<rai-footer>
```

Example with multiple footers:

```
feat(auth): add OAuth2 integration

Implemented OAuth2 authentication flow with Google and GitHub providers.
Added automatic account linking for existing users.

BREAKING CHANGE: Removed legacy session-based authentication
Closes #123

üõ°Ô∏è RAI: AI-Assisted
```

## CLI Usage

### Node.js / Commitlint

Test commit message from stdin:
```bash
echo "feat: add feature\n\nüõ°Ô∏è RAI: AI-Generated" | npx commitlint
```

Validate last commit:
```bash
npx commitlint --from HEAD~1
```

Validate specific commit:
```bash
npx commitlint --from abc123f
```

Validate range:
```bash
npx commitlint --from main --to develop
```

### Python / Gitlint

Lint last commit:
```bash
gitlint
```

Lint specific commit:
```bash
gitlint --commit abc123f
```

Lint commit message from file:
```bash
gitlint --msg-filename .git/COMMIT_EDITMSG
```

Test message from stdin:
```bash
echo "feat: add feature\n\nüõ°Ô∏è RAI: AI-Generated" | gitlint
```

## IDE Integration

### VS Code

Install the Conventional Commits extension and add this to `.vscode/settings.json`:

```json
{
  "conventionalCommits.autoCommit": false,
  "conventionalCommits.promptFooter": true,
  "conventionalCommits.footerPrefix": "üõ°Ô∏è RAI: ",
  "conventionalCommits.footerType": [
    "AI-Generated",
    "AI-Assisted",
    "Generated-by: Verdent AI <verdent@verdent.ai>"
  ]
}
```

### JetBrains IDEs

Configure commit template in Settings ‚Üí Version Control ‚Üí Commit:

```
<type>(<scope>): <subject>

<body>

üõ°Ô∏è RAI: AI-Assisted
```

## CI/CD Integration

### GitHub Actions

Add validation to your workflow:

```yaml
name: Lint Commits

on: [push, pull_request]

jobs:
  commitlint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - uses: actions/setup-node@v4
        with:
          node-version: 20
      
      - run: npm ci
      
      - run: npx commitlint --from ${{ github.event.pull_request.base.sha }} --to ${{ github.sha }}
```

### GitLab CI

```yaml
commitlint:
  stage: test
  image: node:20
  script:
    - npm ci
    - npx commitlint --from $CI_MERGE_REQUEST_TARGET_BRANCH_SHA --to HEAD
  only:
    - merge_requests
```

### Jenkins

```groovy
stage('Commit Lint') {
  steps {
    sh 'npm ci'
    sh 'npx commitlint --from origin/main --to HEAD'
  }
}
```

## Best Practices

### 1. Choose the Right Footer

- **AI-Generated**: AI wrote 100% of the code/content
- **AI-Assisted**: AI provided suggestions, but human made final decisions
- **Verdent AI**: Explicit tool attribution required

### 2. Be Consistent

Use the same footer format across your team/organization for consistency.

### 3. Automate Footer Addition

Create Git aliases to automatically add footers:

```bash
git config alias.cai '!git commit -e -m "$(cat)" -m "" -m "üõ°Ô∏è RAI: AI-Assisted"'
```

Usage:
```bash
echo "feat: add new feature" | git cai
```

### 4. Document Your Policy

Add a `CONTRIBUTING.md` explaining when to use each footer type:

```markdown
## AI Attribution Policy

All commits must include an RAI footer:

- Use `üõ°Ô∏è RAI: AI-Generated` when AI generated the entire commit
- Use `üõ°Ô∏è RAI: AI-Assisted` when AI helped but you made decisions
- Use `Generated-by: Verdent AI <verdent@verdent.ai>` for Verdent AI work
```

## Common Issues

### Footer Not Detected

**Problem**: Commit rejected even with footer present

**Solutions**:
1. Check for extra whitespace around the footer
2. Ensure footer is on its own line
3. Verify emoji rendering (üõ°Ô∏è should be shield emoji)
4. Check for typos in "Generated-by" or email format

### Multiple Footers

**Problem**: Can I include multiple RAI footers?

**Answer**: No, only one RAI footer is needed per commit. Choose the most accurate one.

### Amending Commits

To add footer to previous commit:

```bash
git commit --amend -m "$(git log -1 --pretty=%B)" -m "" -m "üõ°Ô∏è RAI: AI-Assisted"
```

### Rebasing

When rebasing, ensure all commits include RAI footers:

```bash
git rebase -i HEAD~5
```

For each commit without a footer, use `edit` and add the footer:

```bash
git commit --amend -m "$(git log -1 --pretty=%B)" -m "" -m "üõ°Ô∏è RAI: AI-Assisted"
git rebase --continue
```
